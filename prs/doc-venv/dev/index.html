<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Developers &#8212; Analog Devices Hardware Python Interfaces 0.0.20 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8e8a900e" />
    <link rel="stylesheet" type="text/css" href="../_static/app.min.css?v=0ea85bdb" />
    <link rel="stylesheet" type="text/css" href="../_static/css/style.css?v=632a43e7" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=7d492192"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script defer="" src="../_static/app.umd.js?v=25136f1d"></script>
    <link rel="icon" href="../_static/favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Attribute Tests" href="test_attr.html" />
    <link rel="prev" title="Support" href="../support.html" />
   
  
  <meta name="repository" content="pyadi-iio">
  <meta name="version" content="0.0.20">
  


<style>
  body {
    
  }

  body.dark {
    
  }

  @media (prefers-color-scheme: dark) {
    body:not(.light) {
      
    }
  }
</style>
  </head><body>
  <input type="checkbox" id="input-show-toc">
  <input type="checkbox" id="input-show-localtoc">
  <input type="checkbox" id="input-show-repotoc">

  
  <div class="search-area">
    <form action="" method="get">
      <input type="text" name="q" aria-labelledby="search-documentation" value="" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="search" placeholder="Search"/>
      <button value="search" class="icon"></button>
      <span id="search-progress"></span>
    </form>
  </div>
  

  <header>
    <div id="left">
      <label id="show-sidebar" class="icon" for="input-show-toc" title="Show/hide index"></label>
    </div>
    <div id="right">
      <span>
        <a id="logo-org" href="https://analog.com"></a>
        <div class="vertical-divider"></div>
        <label id="show-repotoc" for="input-show-repotoc" title="Show/hide docs" tabindex="0">Docs</label>
        <a id="logo" href="../index.html">
          <div>Hardware Python Interfaces</div>
        </a>
      </span>
      <span class="reverse">
        <label id="show-localtoc" class="icon" for="input-show-localtoc" title="Show/hide contents"></label>
      </span>
    </div>
  </header>


  <div class="repotoc-tree overlay">
    <root>
  <a href="../index.html" class="current">Hardware Python Interfaces</a>
</root>

  </div>
    <div class="localtoc">
      <div class="tocwrapper">
        <div>
          <div class="localtoc-header"></div>
          <a id="scroll-up" href="#top-anchor" title="Back to top"></a>
        </div>
        <nav>
          <ul>
<li><a class="reference internal" href="#">Developers</a><ul>
<li><a class="reference internal" href="#invoke">Invoke</a></li>
<li><a class="reference internal" href="#precommit">Precommit</a></li>
<li><a class="reference internal" href="#testing">Testing</a><ul>
<li><a class="reference internal" href="#test-configuration">Test Configuration</a></li>
<li><a class="reference internal" href="#new-hardware-requirements">New Hardware Requirements</a></li>
<li><a class="reference internal" href="#test-functions-and-fixtures">Test Functions and Fixtures</a></li>
</ul>
</li>
<li><a class="reference internal" href="#set-up-isolated-environment">Set Up Isolated Environment</a><ul>
<li><a class="reference internal" href="#install-pyenv">Install pyenv</a></li>
<li><a class="reference internal" href="#create-isolated-install-with-pipenv">Create isolated install with pipenv</a></li>
</ul>
</li>
<li><a class="reference internal" href="#emulation">Emulation</a></li>
</ul>
</li>
</ul>

        </nav>
      </div>
    </div>

  
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
    <a id="logo" href="../index.html">
      <img class="only-light" src="../_static/logos/PyADI-IIO_Logo_300_cropped.png"/>
      <img class="only-dark" src="../_static/logos/PyADI-IIO_Logo_w_300_cropped.png"/>
    </a><input id="input-switch-toc" type="checkbox">
<label id="show-repotoc" for="input-switch-toc">
All content
</label>
<label id="show-toc" for="input-switch-toc">
Content on this topic
</label>
<div class="repotoc-tree">
  <root>
  <a href="../index.html" class="current">Hardware Python Interfaces</a>
</root>

</div>
<div class="toc-tree">
  <html>
  <body><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../guides/quick.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../attr/index.html">Attributes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guides/examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guides/connectivity.html">Connectivity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../buffers/index.html">Buffers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fpga/index.html">FPGA Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../libiio.html">libiio Direct Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support.html">Support</a></li>
<li class="toctree-l1 current"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1" id="toctree-collapse-1" checked=""/><div class="collapse"><a class="current reference internal" href="#">Developers</a><label for="toctree-collapse-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="test_attr.html">Attribute Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_dma.html">DMA Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_generics.html">Generic Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_jesd.html">JESD204 Tests</a></li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2" id="toctree-collapse-2"/><div class="collapse"><a class="reference internal" href="../devices/index.html">Supported Devices</a><label for="toctree-collapse-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.QuadMxFE_multi.html">QuadMxFE_multi</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad2s1210.html">ad2s1210</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad353xr.html">ad353xr</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad3552r.html">ad3552r</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad3552r_hs.html">adi.ad3552r_hs module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad4020.html">ad4020</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad405x.html">ad405x</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad4110.html">ad4110</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad4130.html">ad4130</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad4170.html">ad4170</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad4630.html">ad4630</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad469x.html">ad469x</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad5592r.html">ad5592r</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad5627.html">ad5627</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad5686.html">ad5686</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad579x.html">ad579x</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad5754r.html">ad5754r</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad5940.html">adi.ad5940 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad6676.html">adi.ad6676 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad7091rx.html">ad7091rx</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad7124.html">ad7124</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad7134.html">ad7134</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad717x.html">ad717x</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad719x.html">ad719x</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad7291.html">ad7291</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad738x.html">ad738x</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad7606.html">ad7606</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad7689.html">ad7689</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad7746.html">ad7746</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad7768.html">ad7768</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad777x.html">ad777x</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad7799.html">ad7799</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad9081.html">ad9081</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad9081_mc.html">ad9081_mc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad9083.html">ad9083</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad9084.html">ad9084</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad9084_mc.html">ad9084_mc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad9094.html">ad9094</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad9136.html">ad9136</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad9144.html">ad9144</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad9152.html">ad9152</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad9162.html">adi.ad9162 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad9166.html">adi.ad9166 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad9172.html">adi.ad9172 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad9213.html">ad9213</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad9250.html">adi.ad9250 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad9265.html">adi.ad9265 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad936x.html">ad936x</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad937x.html">ad937x</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad9434.html">adi.ad9434 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad9467.html">adi.ad9467 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad9625.html">adi.ad9625 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad9680.html">ad9680</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad4858.html">ad4858</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ad9739a.html">adi.ad9739a module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ada4961.html">adi.ada4961 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adaq8092.html">adaq8092</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adar1000.html">adar1000</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adf4159.html">adf4159</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adf4355.html">adi.adf4355 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adf4371.html">adf4371</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adf5610.html">adf5610</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adg2128.html">adi.adg2128 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adis16375.html">adis16375</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adis16460.html">adis16460</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adis16475.html">adis16475</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adis16480.html">adis16480</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adis16485.html">adis16485</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adis16488.html">adis16488</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adis16490.html">adis16490</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adis16495.html">adis16495</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adis16497.html">adis16497</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adis16507.html">adis16507</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adis16545.html">adis16545</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adis16547.html">adis16547</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adis16550.html">adis16550</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adl5240.html">adi.adl5240 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adl5960.html">adl5960</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.admv8818.html">admv8818</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adpd1080.html">adpd1080</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adpd188.html">adpd188</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adpd410x.html">adpd410x</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adrf5720.html">adrf5720</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adrv9002.html">adrv9002</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adrv9009.html">adrv9009</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adrv9009_zu11eg.html">adrv9009_zu11eg</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adrv9009_zu11eg_fmcomms8.html">adrv9009_zu11eg_fmcomms8</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adrv9009_zu11eg_multi.html">adrv9009_zu11eg_multi</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adt7420.html">adi.adt7420 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adxl313.html">adxl313</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adxl345.html">adxl345</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adxl355.html">adxl355</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adxl380.html">adxl380</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.adxrs290.html">adxrs290</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.cn0511.html">adi.cn0511 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.cn0532.html">cn0532</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.cn0540.html">cn0540</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.cn0554.html">cn0554</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.cn0556.html">cn0556</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.cn0565.html">cn0565</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.cn0566.html">adi.cn0566 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.cn0575.html">cn0575</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.cn0579.html">cn0579</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.daq2.html">daq2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.daq3.html">daq3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.fmc_vna.html">fmc_vna</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.fmcadc3.html">adi.fmcadc3 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.fmcjesdadc1.html">adi.fmcjesdadc1 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.fmclidar1.html">fmclidar1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.fmcomms5.html">fmcomms5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.fmcomms11.html">adi.fmcomms11 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.gen_mux.html">gen_mux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.jesd.html">jesd</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.lm75.html">lm75</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ltc2314_14.html">ltc2314_14</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ltc2387.html">ltc2387</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ltc2499.html">adi.ltc2499 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ltc2664.html">ltc2664</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ltc2688.html">ltc2688</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ltc2672.html">ltc2672</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.ltc2983.html">ltc2983</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.max11205.html">adi.max11205 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.max14001.html">adi.max14001 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.max31855.html">adi.max31855 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.max31865.html">adi.max31865 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.max9611.html">adi.max9611 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.one_bit_adc_dac.html">one_bit_adc_dac</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.tdd.html">tdd</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices/adi.tddn.html">tddn</a></li>
</ul>
</li>
</ul>
</body>
</html>

</div>
        </div>
      </div>

  <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper" id="top-anchor">
          
          <div class="body" role="main">
            
  <section id="developers">
<h1>Developers<a class="headerlink" href="#developers" title="Permalink to this heading"></a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This section is only for developers and advanced users.</p>
</div>
<p>When submitting code or running tests, there are a few ways things are done in pyadi-iio.</p>
<section id="invoke">
<h2>Invoke<a class="headerlink" href="#invoke" title="Permalink to this heading"></a></h2>
<p>To make repetitve tasks easier, pyadi-iio utilizes pyinvoke. To see the available options (once pyinvoke is installed) run:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">invoke --list</span>
<span class="go">Available tasks:</span>

<span class="go">  build           Build python package</span>
<span class="go">  builddoc        Build sphinx doc</span>
<span class="go">  changelog       Print changelog from last release</span>
<span class="go">  checkparts      Check for missing parts in supported_parts.md</span>
<span class="go">  createrelease   Create GitHub release</span>
<span class="go">  libiiopath      Search for libiio python bindings</span>
<span class="go">  precommit       Run precommit checks</span>
<span class="go">  setup           Install required python packages for development through pip</span>
<span class="go">  test            Run pytest tests</span>
</pre></div>
</div>
</section>
<section id="precommit">
<h2>Precommit<a class="headerlink" href="#precommit" title="Permalink to this heading"></a></h2>
<p><strong>pre-commit</strong> is heavily relied on for keeping code in order and for eliminating certain bugs. Be sure to run these checks before submitting code. This can be run through pyinvoke or directly from the repo root as:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">invoke precommit</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pre-commit run --all-files</span>
</pre></div>
</div>
</section>
<section id="testing">
<h2>Testing<a class="headerlink" href="#testing" title="Permalink to this heading"></a></h2>
<p>Testing pyadi-iio requires hardware, but fortunately by default it assumes no hardware is connected unless found. It will only load specific tests for hardware it can find and skip all other tests. <strong>pytest</strong>, which is the framework pyadi-iio uses, can be call as following:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">invoke test</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">python3 -m pytest &lt;add more arguments as needed&gt;</span>
</pre></div>
</div>
<section id="test-configuration">
<h3>Test Configuration<a class="headerlink" href="#test-configuration" title="Permalink to this heading"></a></h3>
<p>There are several advanced features of pytest that are utilized by pyadi-iio. Specifically custom markers and custom plugins.</p>
<p>Markers are a way of labeling tests, which can be then used to filter specific tests. Markers are provided through the <a class="reference external" href="https://github.com/analogdevicesinc/pyadi-iio/blob/master/test/test_map.py">test_map.py</a> file in the test directory. These markers are used to map FPGA based boards with daughtercards to specific tests. <a class="reference external" href="https://wiki.analog.com/resources/tools-software/linux-software/embedded_arm_images">Reference design folder names</a> from the ADI SD cards are using as the markers, which them can be passed through the <em>-m</em> flag to enabled certain tests. For example, the following would enable all tests related to <em>ADRV9009</em>, assuming the hardware is available:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">python3 -m pytest -m zynqmp-zcu102-rev10-adrv9009</span>
</pre></div>
</div>
<p>To help manage libiio contexts, filter tests based on those contexts, and map drivers to board definitions, pyadi-iio utilizes the pytest plugin <a class="reference external" href="https://pypi.org/project/pytest-libiio/">pytest-libiio</a>. This must be installed before tests are run since all test implementations rely on <a class="reference external" href="https://pytest-libiio.readthedocs.io/en/latest/fixtures/">pytest-libiio fixtures</a>. Generally, pyadi-iio will also use the <a class="reference external" href="https://pytest-libiio.readthedocs.io/en/latest/cli/#hardware-maps">standard hardware map</a> provided by <em>pytest-libiio</em> to map drivers to board definitions. To enable the hardware make requires the <em>–adi-hw-map</em> flag as:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">python3 -m pytest --adi-hw-map</span>
</pre></div>
</div>
<p>If you are working on a driver or board that is not in the hardware map, a custom one can be created as documentation in the <a class="reference external" href="https://pytest-libiio.readthedocs.io/en/latest/cli/#hardware-maps">pytest-libiio CLI</a>.</p>
</section>
<section id="new-hardware-requirements">
<h3>New Hardware Requirements<a class="headerlink" href="#new-hardware-requirements" title="Permalink to this heading"></a></h3>
<p>In order to maintain pyadi-iio, for all new drivers the development team will require emulation contexts to be submitted alongside the new class interfaces. This is to ensure that the new drivers are tested and maintained. Emulation contexts can be created using <a class="reference external" href="https://pytest-libiio.readthedocs.io/en/latest/emulation/#adding-device-support">xml_gen</a>. CI will automatically validate that all hardware interfaces have emulation contexts and prevent merging if they are missing.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that xml_gen is not the same as iio_genxml, as iio_genxml does not capture default values of properties required for emulation.</p>
</div>
</section>
<section id="test-functions-and-fixtures">
<h3>Test Functions and Fixtures<a class="headerlink" href="#test-functions-and-fixtures" title="Permalink to this heading"></a></h3>
<p>pyadi-iio has a large set of parameterizable fixtures for testing different device specific class interfaces. See the links belows to the different test categories:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="test_attr.html">Attribute Tests</a><ul>
<li class="toctree-l2"><a class="reference internal" href="test_attr.html#test.attr_tests.attribute_check_range_readonly_with_depends"><code class="docutils literal notranslate"><span class="pre">attribute_check_range_readonly_with_depends()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_attr.html#test.attr_tests.attribute_check_range_singleval_with_depends"><code class="docutils literal notranslate"><span class="pre">attribute_check_range_singleval_with_depends()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_attr.html#test.attr_tests.attribute_multiple_values"><code class="docutils literal notranslate"><span class="pre">attribute_multiple_values()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_attr.html#test.attr_tests.attribute_multiple_values_available_readonly"><code class="docutils literal notranslate"><span class="pre">attribute_multiple_values_available_readonly()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_attr.html#test.attr_tests.attribute_multiple_values_device_channel"><code class="docutils literal notranslate"><span class="pre">attribute_multiple_values_device_channel()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_attr.html#test.attr_tests.attribute_multiple_values_error"><code class="docutils literal notranslate"><span class="pre">attribute_multiple_values_error()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_attr.html#test.attr_tests.attribute_multiple_values_with_depends"><code class="docutils literal notranslate"><span class="pre">attribute_multiple_values_with_depends()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_attr.html#test.attr_tests.attribute_readonly_with_depends"><code class="docutils literal notranslate"><span class="pre">attribute_readonly_with_depends()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_attr.html#test.attr_tests.attribute_single_value"><code class="docutils literal notranslate"><span class="pre">attribute_single_value()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_attr.html#test.attr_tests.attribute_single_value_boolean"><code class="docutils literal notranslate"><span class="pre">attribute_single_value_boolean()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_attr.html#test.attr_tests.attribute_single_value_boolean_readonly"><code class="docutils literal notranslate"><span class="pre">attribute_single_value_boolean_readonly()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_attr.html#test.attr_tests.attribute_single_value_channel_readonly"><code class="docutils literal notranslate"><span class="pre">attribute_single_value_channel_readonly()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_attr.html#test.attr_tests.attribute_single_value_device_name_channel_readonly"><code class="docutils literal notranslate"><span class="pre">attribute_single_value_device_name_channel_readonly()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_attr.html#test.attr_tests.attribute_single_value_pow2"><code class="docutils literal notranslate"><span class="pre">attribute_single_value_pow2()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_attr.html#test.attr_tests.attribute_single_value_range_channel"><code class="docutils literal notranslate"><span class="pre">attribute_single_value_range_channel()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_attr.html#test.attr_tests.attribute_single_value_readonly"><code class="docutils literal notranslate"><span class="pre">attribute_single_value_readonly()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_attr.html#test.attr_tests.attribute_single_value_str"><code class="docutils literal notranslate"><span class="pre">attribute_single_value_str()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_attr.html#test.attr_tests.attribute_write_only_str"><code class="docutils literal notranslate"><span class="pre">attribute_write_only_str()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_attr.html#test.attr_tests.attribute_write_only_str_device_channel"><code class="docutils literal notranslate"><span class="pre">attribute_write_only_str_device_channel()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_attr.html#test.attr_tests.attribute_write_only_str_with_depends"><code class="docutils literal notranslate"><span class="pre">attribute_write_only_str_with_depends()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_attr.html#test.attr_tests.floor_step_size"><code class="docutils literal notranslate"><span class="pre">floor_step_size()</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="test_dma.html">DMA Tests</a><ul>
<li class="toctree-l2"><a class="reference internal" href="test_dma.html#test.dma_tests.cw_loopback"><code class="docutils literal notranslate"><span class="pre">cw_loopback()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_dma.html#test.dma_tests.cyclic_buffer"><code class="docutils literal notranslate"><span class="pre">cyclic_buffer()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_dma.html#test.dma_tests.cyclic_buffer_exception"><code class="docutils literal notranslate"><span class="pre">cyclic_buffer_exception()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_dma.html#test.dma_tests.dds_loopback"><code class="docutils literal notranslate"><span class="pre">dds_loopback()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_dma.html#test.dma_tests.dds_two_tone"><code class="docutils literal notranslate"><span class="pre">dds_two_tone()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_dma.html#test.dma_tests.dma_dac_zeros"><code class="docutils literal notranslate"><span class="pre">dma_dac_zeros()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_dma.html#test.dma_tests.dma_loopback"><code class="docutils literal notranslate"><span class="pre">dma_loopback()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_dma.html#test.dma_tests.dma_rx"><code class="docutils literal notranslate"><span class="pre">dma_rx()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_dma.html#test.dma_tests.dma_tx"><code class="docutils literal notranslate"><span class="pre">dma_tx()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_dma.html#test.dma_tests.gain_check"><code class="docutils literal notranslate"><span class="pre">gain_check()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_dma.html#test.dma_tests.hardwaregain"><code class="docutils literal notranslate"><span class="pre">hardwaregain()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_dma.html#test.dma_tests.harmonic_vals"><code class="docutils literal notranslate"><span class="pre">harmonic_vals()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_dma.html#test.dma_tests.nco_loopback"><code class="docutils literal notranslate"><span class="pre">nco_loopback()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_dma.html#test.dma_tests.stress_context_creation"><code class="docutils literal notranslate"><span class="pre">stress_context_creation()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_dma.html#test.dma_tests.stress_rx_buffer_creation"><code class="docutils literal notranslate"><span class="pre">stress_rx_buffer_creation()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_dma.html#test.dma_tests.stress_rx_buffer_length"><code class="docutils literal notranslate"><span class="pre">stress_rx_buffer_length()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_dma.html#test.dma_tests.stress_tx_buffer_creation"><code class="docutils literal notranslate"><span class="pre">stress_tx_buffer_creation()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_dma.html#test.dma_tests.t_sfdr"><code class="docutils literal notranslate"><span class="pre">t_sfdr()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_dma.html#test.dma_tests.verify_overflow"><code class="docutils literal notranslate"><span class="pre">verify_overflow()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_dma.html#test.dma_tests.verify_underflow"><code class="docutils literal notranslate"><span class="pre">verify_underflow()</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="test_generics.html">Generic Tests</a><ul>
<li class="toctree-l2"><a class="reference internal" href="test_generics.html#test.generics.iio_attribute_single_value"><code class="docutils literal notranslate"><span class="pre">iio_attribute_single_value()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_generics.html#test.generics.iio_buffer_check"><code class="docutils literal notranslate"><span class="pre">iio_buffer_check()</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="test_jesd.html">JESD204 Tests</a><ul>
<li class="toctree-l2"><a class="reference internal" href="test_jesd.html#test.jesd_tests.verify_links"><code class="docutils literal notranslate"><span class="pre">verify_links()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="test_jesd.html#test.jesd_tests.verify_links_errors_stable"><code class="docutils literal notranslate"><span class="pre">verify_links_errors_stable()</span></code></a></li>
</ul>
</li>
</ul>
</div>
</section>
</section>
<section id="set-up-isolated-environment">
<h2>Set Up Isolated Environment<a class="headerlink" href="#set-up-isolated-environment" title="Permalink to this heading"></a></h2>
<p>This section will discuss a method to do isolated development with the correct package versions. The main purpose here is to eliminate any discrepancies that can arise (especially with the linting tools) when running precommit and other checks. This is also useful to not pollute your local global packages. The approach here relies upon leveraging <strong>pyenv</strong> and <strong>pipenv</strong> together.</p>
<section id="install-pyenv">
<h3>Install pyenv<a class="headerlink" href="#install-pyenv" title="Permalink to this heading"></a></h3>
<p><strong>pyenv</strong> is a handy tool for installing different and isolated versions of python on your system. Since distributions can ship with rather random versions of python, pyenv can help us install exactly the versions we want. The quick way to install pyenv is with their bash script:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>https://pyenv.run<span class="w"> </span><span class="p">|</span><span class="w"> </span>bash
</pre></div>
</div>
<p>Add to your path and shell startup script (.bashrc, .zshrc, …)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;/home/&lt;username&gt;/.pyenv/bin:</span><span class="nv">$PATH</span>
<span class="s2">eval &quot;</span><span class="k">$(</span>pyenv<span class="w"> </span>init<span class="w"> </span>-<span class="k">)</span><span class="s2">&quot;</span>
<span class="s2">eval &quot;</span><span class="k">$(</span>pyenv<span class="w"> </span>virtualenv-init<span class="w"> </span>-<span class="k">)</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>Install the desired python version</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pyenv<span class="w"> </span>install<span class="w"> </span><span class="m">3</span>.6.9
</pre></div>
</div>
</section>
<section id="create-isolated-install-with-pipenv">
<h3>Create isolated install with pipenv<a class="headerlink" href="#create-isolated-install-with-pipenv" title="Permalink to this heading"></a></h3>
<p>Get the repo, set python version, and setup env</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip3<span class="w"> </span>install<span class="w"> </span>-U<span class="w"> </span>pipenv
pyenv<span class="w"> </span><span class="nb">local</span><span class="w"> </span><span class="m">3</span>.6.9
git<span class="w"> </span>clone<span class="w"> </span>git@github.com:analogdevicesinc/pyadi-iio.git
pipenv<span class="w"> </span>install
pipenv<span class="w"> </span>shell
pipenv<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
pipenv<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements_dev.txt
</pre></div>
</div>
<p>Now at this point we have all the necessary development packages to start working. If you close the current shell you will lose the environment. To return to it, go to the project folder and run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>&lt;project<span class="w"> </span>folder&gt;
pyenv<span class="w"> </span><span class="nb">local</span><span class="w"> </span><span class="m">3</span>.6.9
pipenv<span class="w"> </span>shell
</pre></div>
</div>
</section>
</section>
<section id="emulation">
<h2>Emulation<a class="headerlink" href="#emulation" title="Permalink to this heading"></a></h2>
<p>By leveraging <a class="reference external" href="https://github.com/analogdevicesinc/iio-emu">iio-emu</a>, hardware or contexts can be emulated for testing without physical devices. However, currently this emulation does not validate attribute rates, states of drivers, or equivalent data sources. This feature should be used to test a library itself rather than hardware drivers.</p>
<p><strong>pyadi-iio</strong> uses <em>iio-emu</em> through <em>pytest-libiio</em>, which handles loading the correct context files based on the fixtures used for each test. Essentially, when <em>pytest</em> is run, based on the fixture below, <em>pytest-libiio</em> will spawn the correct context with <em>iio-emu</em> and pass the URI of that context to the test.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pytest</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">iio</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">iio_hardware</span><span class="p">(</span><span class="s2">&quot;pluto&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>  <span class="c1"># Set True disables test during emulation</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_libiio_device</span><span class="p">(</span><span class="n">iio_uri</span><span class="p">):</span>
    <span class="n">ctx</span> <span class="o">=</span> <span class="n">iio</span><span class="o">.</span><span class="n">Context</span><span class="p">(</span><span class="n">iio_uri</span><span class="p">)</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>To create and add more context files for testing with <strong>pyadi-iio</strong> follow <a class="reference external" href="https://pytest-libiio.readthedocs.io/en/latest/emulation/">this page</a>.</p>
</section>
</section>


          </div>
              <div class="related">
                &nbsp;
    <a href="../support.html" title="Previous document (Alt+Shift+LeftArrow)" class="prev">Support</a>
    <a href="test_attr.html" title="Next document (Alt+Shift+RightArrow)" class="next">Attribute Tests</a>
              </div>
          
        </div>
      </div>
  </div>

  <div id="vertical-border"></div>

  <label id="cancel-area-show-toc" for="input-show-toc"></label>
  <label id="cancel-area-show-localtoc" for="input-show-localtoc"></label>
    <footer>
      &#169;2019-2025, Analog Devices, Inc
      
      |
      Made with <a href="https://www.sphinx-doc.org/">Sphinx</a>
      &amp; <a href="https://github.com/analogdevicesinc/doctools">Doctools</a>
      
    </footer>
  </body>
</html>